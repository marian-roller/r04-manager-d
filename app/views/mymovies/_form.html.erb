<div id="mymovies-form-page">
  <%= form_with(model: mymovie, local: true) do |form| %>
    <div class="mymovie-form">

      <% if mymovie.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(mymovie.errors.count, "error") %> prohibited this mymovie from being saved:</h2>

          <ul>
            <% mymovie.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>
      <div class="card-body">
        <div class="row p-3">

          <div class="col-md-6">
          </div>

          <div class="col-md-6">

            <div class="field form-group mb-4">
              <%= form.label :movie_id, class: 'font-weight-bold text-muted small' %>
              <%= form.collection_select(:movie_id, Movie.all, :id, :title, {:prompt=> "-- Choose the movie --"}, {:class=>'form-control form-control-sm'}) %>
            </div>

<!--            warunek na nowy / edytowany, żeby się nie resetowało przy updacie-->
            <%= form.hidden_field :status, :value => "1" %>

            <div class="field form-group mb-4">
              <%= form.check_box :urgent %>
              <%= form.label :urgent, class: 'font-weight-bold text-muted small' %>
            </div>

            <div class="field form-group mb-4">
              <%= form.label :watching_start, class: 'font-weight-bold text-muted small' %>
              <br>
              <div class="d-flex">
                <%= form.date_select :watching_start,
                                     {
                                         :order => [:day, :month, :year],
                                         :start_year => 2015, :end_year => 2030,
                                         prompt: {day: '-- day --', month: '-- day --', year: '-- year --'}
                                     }, {:class => 'form-control form-control-sm mr-1'} %>
              </div>

            </div>

            <div class="field form-group mb-4">
              <%= form.label :watching_end, class: 'font-weight-bold text-muted small' %>
              <br>
              <div class="d-flex">
                <%= form.date_select :watching_end,
                                     {
                                         :order => [:day, :month, :year],
                                         :start_year => 2015, :end_year => 2030,
                                         prompt: {day: '-- day --', month: '-- day --', year: '-- year --'}
                                     }, {:class => 'form-control form-control-sm mr-1'} %>
              </div>
            </div>

            <div class="field form-group mb-4">
              <%= form.label :times_watched, class: 'font-weight-bold text-muted small' %>
              <%= form.number_field :times_watched, class: 'form-control form-control-sm' %>
            </div>

            <div class="field form-group mb-4">
              <%= form.label :ranking, class: 'font-weight-bold text-muted small' %>
              <%= form.number_field :ranking, class: 'form-control form-control-sm' %>
            </div>

            <div class="field form-group mb-4">
              <%= form.label :watching_season, class: 'font-weight-bold text-muted small' %>
              <%= form.number_field :watching_season, class: 'form-control form-control-sm' %>
            </div>

            <div class="field form-group mb-4">
              <%= form.label :last_episode, class: 'font-weight-bold text-muted small' %>
              <%= form.number_field :last_episode, class: 'form-control form-control-sm' %>
            </div>

            <div class="field form-group mb-4">
              <%= form.label :impression, class: 'font-weight-bold text-muted small' %>
              <%= form.text_area :impression, class: 'form-control form-control-sm' %>
            </div>


          </div>
        </div>
      </div>

      <div class="card-footer text-center">
        <div class="actions">
          <%= form.submit class: 'btn btn-info btn-block' %>
        </div>
      </div>

    </div>
  <% end %>
</div>

